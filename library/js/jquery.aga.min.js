/**
 * Aga v1.08
 * http://squareflower.de/downloads/jquery/aga/
 *
 * Copyright 2010, Lukas Rydygel
 * Attribution-ShareAlike 3.0 Unported
 * http://creativecommons.org/licenses/by-sa/3.0/
 */
(function(d){d.fn.aga=function(k){var g=function(){},j=[];j.horizontal=["aga-horizontal","aga-horizontal-item","aga-horizontal-item-open"];j.vertical=["aga-vertical","aga-vertical-item","aga-vertical-item-open"];var a={easing:["",""],size:{min:20,max:"variable"},handler:function(a){return d(a)},circular:!1,orientation:"horizontal",direction:"left",forceSize:!0,start:0,action:"click",stayOpen:!0,locked:!1,animationTime:500,hoverTime:500,items:"li",open:{before:g,durring:g,each:g,after:g},close:{before:g, durring:g,each:g,after:g}},l=a.start,n,e={_getItems:function(){return d(this).children(a.items)},_getSize:function(b,f,c){switch(a.orientation){case "horizontal":return a.forceSize?c-(b.length-1)*a.size.min:d(b[f]).width();case "vertical":return a.forceSize?c-(b.length-1)*a.size.min:d(b[f]).height()}},_getAnimationProperties:function(a,d){switch(a){case "top":return{top:d};case "right":return{right:d};case "bottom":return{bottom:d};case "left":return{left:d};case "horizontal":return{width:d};case "vertical":return{height:d}}}, _setOptions:function(b){d.extend(!0,a,b);d(this).data("aga-settings",a)},_getOptions:function(){return d(this).data("aga-settings")},options:function(a){return"object"===typeof a?e._setOptions.apply(this,[a]):e._getOptions.apply(this)},pointer:function(){return d(this).data("aga-pointer")},init:function(b){e._setOptions.apply(this,[b]);d(this).data("aga-pointer",l).addClass(j[a.orientation][0]);for(var f=this,c=e._getItems.apply(this),i,b=0;b<c.length;b++)(function(b){i="function"==typeof a.handler? a.handler(c[b]):null;d(c[b]).addClass(j[a.orientation][1]);if(i)switch(a.action){case "click":i.bind("click",function(){l=d(f).data("aga-pointer");b==l&&!a.stayOpen?e.close.apply(f,[b,!1]):e.open.apply(f,[b,!1])});break;case "hover":d(f).hover(function(){},function(){clearTimeout(n);n=setTimeout(function(){a.stayOpen||e.close.apply(f,[b,!1])},a.hoverTime)}),i.hover(function(){clearTimeout(n);n=setTimeout(function(){e.open.apply(f,[b,!1])},a.hoverTime)})}})(b);null==a.start?e.close.apply(this,[null, !0]):e.open.apply(this,[a.start,!0])},close:function(b,f){if(a.locked)return null;d(this).data("aga-pointer",null);var c=e._getItems.apply(this),i=e._getAnimationProperties(a.orientation,c.length*a.size.min),g=f?0:a.animationTime,m;a.forceSize||d(this).animate(i,g,a.easing[1]);a.close.before(c,b);for(var l=a.forceSize?d(this).width()/c.length:a.size.min,h=0;h<c.length;h++)m=h*l,i=e._getAnimationProperties(a.direction,m),m=function(e){a.close.durring(c,e,b);d(c[e]).animate(i,g,a.easing[1],function(){a.close.each(c, e,b)})},m(h),d(c[h]).removeClass(j[a.orientation][2]);a.close.after(c,b)},open:function(b,f){if(a.locked)return null;switch(b){case "next":b=l+1;break;case "prev":b=l-1}var c=e._getItems.apply(this);if(0>b||b>c.length-1)if(a.circular)b=0>b?c.length-1:0;else return!1;d(this).data("aga-pointer",b);var i=d(this).width(),i="variable"==a.size.max?e._getSize(c,b,i):a.size.max,g=f?0:a.animationTime,m=e._getAnimationProperties(a.orientation,"variable"==a.size.max?(c.length-1)*a.size.min+i:(c.length-1)*a.size.min+ a.size.max),k;a.forceSize||d(this).animate(m,g,a.easing[0]);a.open.before(c,b);for(var h=0;h<c.length;h++)k=h<=b?h*a.size.min:(h-1)*a.size.min+i,m=e._getAnimationProperties(a.direction,k),k=function(e){d(c[e]).animate(m,g,a.easing[0],function(){a.open.each(c,e,b)}).removeClass(j[a.orientation][2]);a.open.durring(c,e,b)},k(h),h==b&&d(c[h]).addClass(j[a.orientation][2]);a.open.after(c,b)},destroy:function(){var b=e._getItems.apply(this),f;d(this).removeClass(j[a.orientation][0]);for(var c=0;c<b.length;c++)(function(c){f= "function"==typeof a.handler?a.handler(b[c]):null;d(b[c]).removeClass(j[a.orientation][0]+" "+j[a.orientation][1]);if(f)switch(a.action){case "click":f.unbind("click");break;case "hover":d(this).unbind("mouseenter mouseleave"),f.unbind("mouseenter")}})(c)}},o=arguments;return this.each(function(){e[k]?(a=e._getOptions.apply(this),l=d(this).data("aga-pointer"),e[k].apply(this,Array.prototype.slice.call(o,1))):("object"===typeof k||!k)&&e.init.apply(this,o)})}})(jQuery);
